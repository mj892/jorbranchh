<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart</title>
    <style>
        body {
            background: rgb(193, 154, 114);
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            color: #333;
        }
        .background-blur {
            background-image: url('images/jj.jpg'); /* Ensure this path is correct */
            background-size: cover;
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-position: center;
            position: absolute;
            width: 100%;
            height: 100%;
            filter: blur(8px);
            z-index: -1; 
        }
        .navbar {
            position: fixed;
            top: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #6d656b;
            height: 10vh;
            width: 100%;
            color: white;
            padding: 0 10px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 3;
        }
        .navbar a {
            text-decoration: none;
            color: white;
            padding: 24px 30px;
            border: 2px solid transparent;
            border-radius: 5px;
            font-size: 20px; 
        }
        .navbar a:hover {
            background-color: #4b4d48;
        }
		
        .navbar img {
            height: 62px; 
            width: 200px;
            margin-left: -272px;
            object-fit: fill; 
            border-radius: 100px;
        }

        .dropdown { 
            position: relative;
            display: inline-block;
            padding: 0 0px;
            z-index: 1;
            width: 19%;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #6d656b;
            color: black; 
            min-width: 150px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 3;
            height: 28vh;
            left: -16px;
            top: 177%; 
            width: 100%;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-size: 20px;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        .dropdown:hover .dropdown-content {
            display: block;
            width: 67%;
        }

        .cart-container {
            margin: 80px auto;
            max-width: 1000px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .cart-item {
            display: flex;
            align-items: center;
            padding: 8px; 
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 8px;
            position: relative; 
        }
        .item-image {
            width: 120px; 
            height: auto; 
            margin-right: 25px; 
            border-radius: 5px;
        }
        .item-info {
            flex: 1; 
        }
        .purchase-btn {
            background-color: green;
            color: white;
            transition: background-color 0.3s;
            padding: 15px 30px;
            font-size: 23px; 
            width: 100%; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin-top: 10px; 
        }
        .remove-btn {
            position: absolute; 
            top: 10px; 
            right: 10px; 
            background-color: transparent; 
            color: red; 
            border: none; 
            font-size: 20px; 
            cursor: pointer; 
        }

        .info-box {
            display: none;
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -20%);
            background: white;
            border: 2px solid #333;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 4;
            width: 90%; 
            max-width: 600px; 
        }

        .close-btn {
            cursor: pointer;
            color: white;
            background-color: red;
            padding: 10px;
            border: none;
            border-radius: 5px;
            position: absolute; 
            top: 10px; 
            right: 10px; 
        }

        .info-box h2 {
            margin: 0 0 10px;
        }

        .info-box p {
            margin: 0 0 10px;
        }

        .input-field {
            margin-bottom: 10px;
            width: calc(100% - 20px); 
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .payment-method {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .payment-box {
            display: flex;
            align-items: center;
        }

        .payment-logo {
            width: 30px; 
            height: auto;
            margin-right: 5px;
        }

        .confirm-btn,
        .close-btn {
            cursor: pointer;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin-top: 10px;
        }

        .confirm-btn {
            background-color: green;
        }

        .add-to-cart-btn {
            background-color: blue; 
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .card:hover {
            transform: scale(1.10);
        }
    </style>
</head>
<body>
    <div class="background-blur"></div>
    <div class="navbar">
        <div class="dropdown">
            <a href="#">☰</a>
            <div class="dropdown-content">
                   <a href="profile.php">Profile</a>
                <a href="purchases.html">Purchases</a>
                 <a href="#" onclick="confirmLogout()">Logout</a>
            </div>
        </div>
        <img src="images/logo.jpg" alt="Logo">
        <a href="home.html">Home</a>
        <a href="shop.html#all-products">Shop</a>
        <a href="cart.html">Cart</a>
        <a href="about.html">About Us</a>
    </div>

    <div class="cart-container">
        <h2>Your Cart</h2>

        <div class="cart-item">
            <img src="images/papaya.jpg" alt="Papaya" class="item-image">
            <div class="item-info">
                <h4>Papaya</h4>
                <p>Price: Php 70</p>
                <label for="quantity-papaya">Quantity:</label>
                <input type="number" id="quantity-papaya" value="1" min="1" max="15" style="width: 50px;">
            </div>
            <button class="remove-btn" onclick="removeItem(this)">X</button>
            <div class="cart-buttons">
                <button class="purchase-btn" onclick="showOrderForm('Papaya', 'Php 70')">Purchase</button>
            </div>
        </div>

           <div class="cart-item">
            <img src="Images/gua.png" alt="Guava" class="item-image">
            <div class="item-info">
                <h4>Guava</h4>
                <p>Price: Php 50</p>
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" value="1" min="1" max="15" style="width: 50px;">
            </div>
            <button class="remove-btn" onclick="removeItem(this)">X</button>
            <div class="cart-buttons">
                <button class="purchase-btn" onclick="showOrderForm('Guava', 'Php 50')">Purchase</button>
            </div>
        </div>
		
		 <div class="cart-item">
            <img src="images/bon.png" alt="Lanzones" class="item-image">
            <div class="item-info">
                <h4>Ficus bonsai</h4>
                <p>Price: Php 850</p>
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" value="1" min="1" max="15" style="width: 50px;">
            </div>
            <button class="remove-btn" onclick="removeItem(this)">X</button>
            <div class="cart-buttons">
                <button class="purchase-btn" onclick="showOrderForm('Ficus bonsai', 'Php 850')">Purchase</button>
            </div>
        </div>

        <div class="cart-item">
            <img src="images/pot1.jpg" alt="Guava" class="item-image">
            <div class="item-info">
                <h4>Plumeria</h4>
                <p>Price: Php 300</p>
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" value="1" min="1" max="15" style="width: 50px;">
            </div>
            <button class="remove-btn" onclick="removeItem(this)">X</button>
            <div class="cart-buttons">
                <button class="purchase-btn" onclick="showOrderForm('Plumeria', 'Php 300')">Purchase</button>
            </div>
        </div>
        
        <div class="info-box" id="infoBox">
            <button class="close-btn" onclick="closeInfo()">✖</button>
            <h2 id="fruitName">Fruit Name</h2>
            <p id="fruitPrice">Price: </p>
            <h3>How to Plant:</h3>
            <p id="plantInstructions">
			 Choose a sunny, well-draining spot. Water the plant a day before to reduce shock. 
            Carefully dig around the roots, keeping soil intact. Place in the new hole at the same depth, 
            backfill, and water thoroughly. Apply mulch to retain moisture. Monitor closely for the first few weeks.
			</p>

            <h3>Order Information:</h3>
            <input type="text" class="input-field" id="name" placeholder="Your Name" required pattern="[A-Za-z\s]+" title="Only letters and spaces allowed">
            <input type="number" class="input-field" id="order-quantity" placeholder="Quantity" min="1" max="15" required>
            <input type="tel" class="input-field" id="cellphone" placeholder="Cellphone Number (11 digits)" required pattern="09\d{9}" title="Must start with 09 and be 11 digits long">
            <input type="text" class="input-field" id="address" placeholder="Address" required pattern="[A-Za-z0-9\s,]+" title="Only letters, numbers, and spaces allowed">

            <div class="payment-method">
                <label class="payment-box">
                    <img src="images/gcash.png" class="payment-logo" alt="GCash Logo">
                    <input type="radio" name="payment" value="Gcash" required> GCash
                </label>
                <label class="payment-box">
                    <img src="images/paypal.png" class="payment-logo" alt="PayPal Logo"> 
                    <input type="radio" name="payment" value="Paypal" required> PayPal
                </label>
                <label class="payment-box">
                    <input type="radio" name="payment" value="Cod" required> Cash on Delivery (COD)
                </label>
            </div>
            <button class="confirm-btn" onclick="confirmOrder()">Confirm</button>
        </div>
    </div>

<script>

    function showOrderForm(itemName, itemPrice) {
        document.getElementById('infoBox').style.display = 'block';
        document.getElementById('fruitName').innerText = itemName; // Fixed ID
        document.getElementById('fruitPrice').innerText = `Price: ${itemPrice}`; // Fixed ID
        document.getElementById('order-quantity').value = 1; // Set default quantity

       
        let instructions = '';
        if (itemName === 'Guava') {
            instructions = "Place in full sunlight and water when the top inch of soil is dry. Ensure well-draining soil to prevent root rot. Keep in a warm area (70-85°F) and avoid frost. Prune regularly to shape and remove dead branches. Fertilize every 4-6 weeks during the growing season. Mulch to retain moisture and suppress weeds. Monitor for pests and treat as needed.";
        } else if (itemName === 'Papaya') {
            instructions = "Choose a sunny, well-draining spot. Water the plant a day before to reduce shock. Carefully dig around the roots, keeping soil intact. Place in the new hole at the same depth, backfill, and water thoroughly. Apply mulch to retain moisture. Monitor closely for the first few weeks.";
	    } else if (itemName === 'Ficus bonsai') {
            instructions = "Place in bright, indirect sunlight and water when the top inch of soil is dry. Maintain humidity by misting leaves. Keep in a warm spot (65-75°F) and avoid drafts. Regularly prune to shape and remove dead leaves. Fertilize every 4-6 weeks in spring and summer. Repot every 1-2 years in spring. Check for pests and treat as needed. Rotate occasionally for even growth. Patience is key!.";
       } else if (itemName === 'Plumeria') {
            instructions = "Choose a sunny, well-draining spot. Water the plant a day before to reduce shock. Carefully dig around the roots, keeping soil intact. Place in the new hole at the same depth, backfill, and water thoroughly. Apply mulch to retain moisture. Monitor closely for the first few weeks.";
		} else {
            instructions = "No specific instructions available.";
        }

        document.getElementById('plantInstructions').innerText = instructions;
    }

    function closeInfo() {
        document.getElementById('infoBox').style.display = 'none';
    }

    function confirmOrder() {
        const name = document.getElementById('name').value.trim();
        const quantity = document.getElementById('order-quantity').value.trim();
        const cellphone = document.getElementById('cellphone').value.trim();
        const address = document.getElementById('address').value.trim();
        const payment = document.querySelector('input[name="payment"]:checked');
        const itemName = document.getElementById('fruitName').innerText; // Fixed ID

        const prices = {
            "Papaya": 70,
            "Lanzones": 80,
            "Guava": 50,
			"Ficus bonsai": 850,
			"Plumeria": 300,
        };

        const itemPrice = prices[itemName];

       
        if (!name || !quantity || !cellphone || !address || !payment) {
            alert("Please fill out all fields before confirming.");
            return;
        }

     
        const namePattern = /^[A-Za-z\s]{5,}$/;
        if (!namePattern.test(name)) {
            alert("Please enter a valid name (at least 5 letters).");
            return;
        }

      
        if (quantity < 1 || quantity > 15) {
            alert("Please enter a quantity between 1 and 15.");
            return;
        }

     
        if (!cellphone.match(/^09\d{9}$/)) {
            alert("Please enter a valid cellphone number (must start with 09 and be 11 digits long).");
            return;
        }

       
        const addressPattern = /^[A-Za-z0-9\s]+$/;
        if (!addressPattern.test(address)) {
            alert("Please enter a valid address (letters, numbers, and spaces only).");
            return;
        }

    
        if (!payment) {
            alert("Please select a payment method.");
            return;
        }

      
        const totalPrice = quantity * itemPrice;
        const url = `tocart.php?name=${encodeURIComponent(name)}&quantity=${encodeURIComponent(quantity)}&cellphone=${encodeURIComponent(cellphone)}&address=${encodeURIComponent(address)}&payment=${encodeURIComponent(payment.value)}&itemName=${encodeURIComponent(itemName)}&itemPrice=${encodeURIComponent(itemPrice)}&totalPrice=${encodeURIComponent(totalPrice)}`;
        window.location.href = url;
    }

    function removeItem(button) {
        const cartItem = button.closest('.cart-item');
        cartItem.remove(); 
    }
	
    	function confirmLogout() {
        const confirmed = confirm("Are you sure you want to log out?");
        if (confirmed) {
            window.location.href = "jorlog.php"; 
        }
    }
</script>
</body>
</html>